<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WebAR Complete Demo</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    
    <style>
      /* â˜…å¤‰æ›´ï¼šãƒœã‚¿ãƒ³ã‚’ã¾ã¨ã‚ã‚‹ã€Œé€æ˜ãªç®±ã€ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
      #ui-container {
        position: fixed;
        bottom: 30px;        /* ä¸‹ã‹ã‚‰ã®ä½ç½® */
        left: 0;
        width: 100%;         /* æ¨ªå¹…ã„ã£ã±ã„ */
        display: flex;       /* ä¸­èº«ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹é­”æ³•ã®å‘ªæ–‡ */
        justify-content: center; /* ä¸­å¤®å¯„ã›ï¼ˆå·¦å³ã«é›¢ã—ãŸã„å ´åˆã¯ space-between ã«ã™ã‚‹ï¼‰ */
        gap: 20px;           /* ãƒœã‚¿ãƒ³åŒå£«ã®é–“éš” */
        z-index: 1000;       /* æœ€å‰é¢ */
        pointer-events: none; /* ãƒœã‚¿ãƒ³ä»¥å¤–ã®å ´æ‰€ã¯ã‚¿ãƒƒãƒã‚’ARã«é€šã™è¨­å®š */
      }

      /* â˜…å¤‰æ›´ï¼šãƒœã‚¿ãƒ³å…±é€šãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆä½ç½®æŒ‡å®šã‚’å‰Šé™¤ï¼‰ */
      .ar-button {
        /* position: fixed; â† å‰Šé™¤ï¼ˆç®±ã®æ–¹ã§ä½ç½®ã‚’æ±ºã‚ã‚‹ãŸã‚ï¼‰ */
        /* left: ...        â† å‰Šé™¤ */
        /* bottom: ...      â† å‰Šé™¤ */
        /* transform: ...   â† å‰Šé™¤ */
        
        pointer-events: auto; /* ãƒœã‚¿ãƒ³è‡ªä½“ã¯æŠ¼ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ */
        
        padding: 10px 0;      /* æ¨ªå¹…å›ºå®šã«ã™ã‚‹ã®ã§å·¦å³ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã¯0ã§ã‚‚OK */
        width: 140px;         /* 2ã¤ä¸¦ã¶ã®ã§å°‘ã—å¹…ã‚’èª¿æ•´ */
        color: white;
        border: none;
        border-radius: 30px;
        font-size: 14px;      /* æ–‡å­—ãŒã¯ã¿å‡ºãªã„ã‚ˆã†å°‘ã—å°ã•ã */
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      }

      .ar-button:active {
        transform: translateY(2px);
        box-shadow: 0 2px 3px rgba(0,0,0,0.3);
      }

      /* è‰²ã®è¨­å®š */
      #toggle-button {
        background-color: #2196F3;
      }
      #play-button {
        background-color: #ff4081;
      }
    </style>
  </head>
  
  <body>
    <a-scene 
      mindar-image="imageTargetSrc: ./targets.mind; filterMinCF:0.0001; filterBeta: 0.01;" 
      color-space="sRGB" 
      renderer="colorManagement: true, physicallyCorrectLights" 
      vr-mode-ui="enabled: false" 
      device-orientation-permission-ui="enabled: false">

      <a-assets>
        <img id="img-back" src="./layer_back.png" />
        <img id="img-middle" src="./layer_middle.png" />
        <img id="img-front" src="./layer_front.png" />
        <img id="img-400k" src="./layer_400k.png" />
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-image src="#img-back" position="0 0 0" height="2" width="2"></a-image>
        <a-image src="#img-middle" position="0 0 0.5" height="2" width="2"></a-image>
        <a-image src="#img-front" position="0 0 0.8" height="2" width="2"></a-image>
        <a-image id="target-layer" src="#img-400k" position="0 0 1.0" height="2" width="2"></a-image>
      </a-entity>
    </a-scene>

    <div id="ui-container">
      <button id="toggle-button" class="ar-button">Hide Logo</button>
      <button id="play-button" class="ar-button">ğŸµ Voice Play</button>
    </div>
    
    <audio id="bgm" src="./voice.mp3"></audio>

    <script>
      // æ©Ÿèƒ½ã¯ãã®ã¾ã¾ã§ã™
      const playBtn = document.getElementById('play-button');
      const audio = document.getElementById('bgm');

      playBtn.addEventListener('click', function() {
        if (audio.paused) {
          audio.play();
          playBtn.innerText = "ğŸ”‡ Stop";
          playBtn.style.backgroundColor = "#555";
        } else {
          audio.pause();
          audio.currentTime = 0;
          playBtn.innerText = "ğŸµ Voice Play";
          playBtn.style.backgroundColor = "#ff4081";
        }
      });

      const toggleBtn = document.getElementById('toggle-button');
      const targetLayer = document.getElementById('target-layer');

      toggleBtn.addEventListener('click', function() {
        const isVisible = targetLayer.getAttribute('visible') !== false;

        if (isVisible) {
          targetLayer.setAttribute('visible', false);
          toggleBtn.innerText = "Show Logo";
          toggleBtn.style.backgroundColor = "#555";
        } else {
          targetLayer.setAttribute('visible', true);
          toggleBtn.innerText = "Hide Logo";
          toggleBtn.style.backgroundColor = "#2196F3";
        }
      });
    </script>
  </body>
</html>